package game.level;

import Managers.ResourceManager;
import auxiliar.Direction;
import game.Controller.NPC;
import game.Controller.Player;
import game.level.layer.InteractionLayer;
import game.level.layer.TileLayer;
import game.object.Entity.AISystem;
import game.object.Entity.tank.Tank;
import game.object.Entity.tank.TankFactory;
import game.object.GameObject;
import game.object.Munition.MunitionFactory;
import org.joml.Vector2f;

import java.sql.*;

public class LevelLoader {

    public static int LevelID = 0;
    public static int Score = 0;

    public static boolean LevelLoaded = false;

    public static void Load(Level lvl)
    {

        //scene create
        //sys add

        Scene scene = new Scene();
        AISystem system = new AISystem();


        int[][] ground;

        int[][] physical;

        switch (LevelID)
        {
            case 0:
                ground = new int[][] {
                        {1,2,2,3,1,5,4,6,3,3,4,4,2,3,1,4},
                        {5,5,4,1,1,1,5,6,5,6,3,2,1,2,1,5},
                        {5,2,1,2,1,5,3,2,6,6,5,4,2,2,6,2},
                        {4,4,6,4,6,3,3,6,6,5,5,5,1,3,1,6},
                        {6,6,5,3,4,2,1,1,1,6,6,6,5,6,5,2},
                        {4,6,6,2,6,5,3,3,2,4,5,6,3,5,3,6},
                        {1,5,3,3,6,3,5,4,1,3,5,3,4,4,4,4},
                        {3,2,3,1,1,6,1,1,1,1,6,3,2,3,1,3},
                        {4,2,1,4,4,6,4,4,1,3,6,1,5,4,2,2},
                        {6,6,1,3,5,6,2,5,2,3,5,4,4,6,2,4},
                        {2,3,3,2,3,5,4,3,2,2,3,5,4,5,3,6},
                        {4,1,4,6,5,2,5,4,3,5,1,1,4,5,2,3},
                        {4,1,2,2,5,3,2,2,6,5,1,1,5,5,1,5},
                        {1,6,6,4,3,2,6,3,3,4,2,2,3,1,2,3},
                        {5,1,1,1,6,6,5,6,5,3,3,4,2,2,3,1},
                        {3,3,1,5,1,4,4,6,6,6,5,1,1,1,2,2},
                        {2,5,4,2,5,1,6,2,2,5,5,6,4,6,5,5},
                        {1,4,5,5,6,4,1,2,1,1,1,6,5,6,5,3},
                        {1,6,4,1,2,4,6,3,2,6,5,4,2,4,2,6},
                        {3,3,3,2,3,6,3,1,5,1,3,2,1,3,3,2},
                        {6,3,4,5,3,4,6,1,2,3,2,3,1,5,6,6},
                        {2,3,5,2,4,5,5,6,2,1,5,6,1,1,3,4}
                };
                physical = new int[][] {
                        {217,217,218,217,217,218,217,218,218,217,218,218,218,217,218,217},
                        {218,0,0,0,0,0,0,0,0,218,217,217,217,218,217,217},
                        {217,0,0,0,0,0,0,0,0,0,0,0,0,0,218,218},
                        {217,0,0,0,0,0,0,0,0,0,0,0,0,0,217,217},
                        {217,0,0,0,0,0,0,0,0,0,0,0,0,0,217,218},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,217,217},
                        {217,0,0,0,0,0,0,0,0,0,0,0,0,224,217,217},
                        {225,224,225,225,225,226,226,0,0,0,0,0,225,226,225,225},
                        {0,0,0,0,0,0,0,0,0,0,0,0,225,232,234,217},
                        {0,0,0,0,0,0,0,0,0,0,0,225,226,0,0,218},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,217},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,217},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,218},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,218},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,218},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,218},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,217},
                        {218,217,217,218,217,217,217,0,0,0,0,0,0,0,0,218},
                        {218,0,0,0,0,0,217,0,0,0,0,0,0,0,0,217},
                        {218,0,0,0,0,0,217,0,0,0,0,0,218,218,218,217},
                        {218,0,0,0,0,0,217,0,0,0,0,0,0,0,0,217},
                        {218,217,217,217,217,217,218,218,218,217,218,217,217,218,218,217}
                };
                break;
            case 1:
            default:
                ground = new int[][] {
                        {1,2,2,3,1,5,4,6,3,3,4,4,2,3,1,4},
                        {5,5,4,1,1,1,5,6,5,6,3,2,1,2,1,5},
                        {5,2,1,2,1,5,3,2,6,6,5,4,2,2,6,2},
                        {4,4,6,4,6,3,3,6,6,5,5,5,1,3,1,6},
                        {6,6,5,3,4,2,1,1,1,6,6,6,5,6,5,2},
                        {4,6,6,2,6,5,3,3,2,4,5,6,3,5,3,6},
                        {1,5,3,3,6,3,5,4,1,3,5,3,4,4,4,4},
                        {3,2,3,1,1,6,1,1,1,1,6,3,2,3,1,3},
                        {4,2,1,4,4,6,4,4,1,3,6,1,5,4,2,2},
                        {6,6,1,3,5,6,2,5,2,3,5,4,4,6,2,4},
                        {2,3,3,2,3,5,4,3,2,2,3,5,4,5,3,6},
                        {4,1,4,6,5,2,5,4,3,5,1,1,4,5,2,3},
                        {4,1,2,2,5,3,2,2,6,5,1,1,5,5,1,5},
                        {1,6,6,4,3,2,6,3,3,4,2,2,3,1,2,3},
                        {5,1,1,1,6,6,5,6,5,3,3,4,2,2,3,1},
                        {3,3,1,5,1,4,4,6,6,6,5,1,1,1,2,2},
                        {2,5,4,2,5,1,6,2,2,5,5,6,4,6,5,5},
                        {1,4,5,5,6,4,1,2,1,1,1,6,5,6,5,3},
                        {1,6,4,1,2,4,6,3,2,6,5,4,2,4,2,6},
                        {3,3,3,2,3,6,3,1,5,1,3,2,1,3,3,2},
                        {6,3,4,5,3,4,6,1,2,3,2,3,1,5,6,6},
                        {2,3,5,2,4,5,5,6,2,1,5,6,1,1,3,4}
                };
                physical = new int[][] {
                        {217,217,218,217,217,218,217,218,218,217,218,218,218,217,218,217},
                        {218,0,0,0,0,0,0,0,0,218,217,217,217,218,217,217},
                        {217,0,0,0,0,0,0,0,0,0,0,0,0,0,218,218},
                        {217,0,0,0,0,0,0,0,0,0,0,0,0,0,217,217},
                        {217,0,0,0,0,0,0,0,0,0,0,0,0,0,217,218},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,217,217},
                        {217,0,0,0,0,0,0,0,0,0,0,0,0,224,217,217},
                        {225,224,225,225,225,226,226,0,0,0,0,0,225,226,225,225},
                        {0,0,0,0,0,0,0,0,0,0,0,0,225,232,234,217},
                        {0,0,0,0,0,0,0,0,0,0,0,225,226,0,0,218},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,217},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,217},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,218},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,218},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,218},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,218},
                        {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,217},
                        {218,217,217,218,217,217,217,0,0,0,0,0,0,0,0,218},
                        {218,0,0,0,0,0,217,0,0,0,0,0,0,0,0,217},
                        {218,0,0,0,0,0,217,0,0,0,0,0,218,218,218,217},
                        {218,0,0,0,0,0,217,0,0,0,0,0,0,0,0,217},
                        {218,217,217,217,217,217,218,218,218,217,218,217,217,218,218,217}
                };
        }

        scene.addLayer(new TileLayer(ResourceManager.Instance().GetTexture("ground"), 20, 20, ground));
        scene.addLayer(new TileLayer(ResourceManager.Instance().GetTexture("walls"), 20, 20, physical));
        scene.addObjectMediator(new InteractionLayer(20, 20, physical.length, physical[1].length));

        TankFactory.SetScene(scene);
        MunitionFactory.SetScene(scene);

        GameObject tank = TankFactory.SpawnTank("light", Direction.Down, new Vector2f(18, 218), 0);
        scene.addObject(tank);


        Player player = new Player((Tank)tank);
        system.addComponent(player);


        tank = TankFactory.SpawnTank("light", Direction.Down, new Vector2f(38, 38), 2);


        NPC npc = new NPC(system, (Tank)tank);
        system.addComponent(npc);

        scene.addObject(tank);

        lvl.setScene(scene);
        lvl.setSystem(system);

        LevelLoaded = true;
    }

}

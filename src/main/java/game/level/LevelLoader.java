package game.level;

import Managers.ResourceManager;
import auxiliar.Direction;
import exceptions.NotImplementedLevel;
import game.Controller.NPC;
import game.Controller.Player;
import game.level.layer.InteractionLayer;
import game.level.layer.TileLayer;
import game.object.Entity.AISystem;
import game.object.Entity.EnemySpawner;
import game.object.Entity.tank.Tank;
import game.object.Entity.tank.TankFactory;
import game.object.GameObject;
import game.object.Munition.MunitionFactory;
import game.object.ObjectMediator;
import org.joml.Vector2f;

import java.sql.*;

public class LevelLoader {

    public static int LevelID = 0;
    public static int Score = 0;
    public static int OldScore = 0;


    public static boolean LevelLoaded = false;

    public static void Load(Level lvl) throws NotImplementedLevel {

        //scene create
        //sys add

        Scene scene = new Scene();
        AISystem system;


        int[][] ground;

        int[][] physical;

        switch (LevelID)
        {
            case 0:
                ground = new int[][] {
                        {1,3,4,2,5,6,6,5,2,1,4,3,5,6,2,2,1,2,6,3,1,6,3,2,4,4,4,3,3,3,6,5},
                        {3,4,3,3,4,1,4,6,1,4,1,5,4,2,4,5,2,3,4,3,3,2,6,3,1,2,4,1,3,5,6,1},
                        {4,2,1,5,5,5,4,1,6,2,3,3,1,1,5,3,6,4,1,2,5,3,3,1,3,3,4,6,1,5,2,5},
                        {5,3,4,1,2,4,5,6,2,1,6,5,3,4,4,4,4,1,5,1,2,4,4,5,3,4,6,6,5,1,6,4},
                        {6,2,4,2,2,6,6,1,1,2,5,1,2,2,6,1,4,4,5,6,4,5,2,5,6,4,4,1,4,5,4,5},
                        {2,2,4,6,2,1,2,1,5,6,6,1,6,6,2,6,3,3,5,2,5,2,4,4,2,2,3,4,4,6,3,1},
                        {1,4,4,4,1,3,4,5,1,3,5,5,5,3,6,5,3,3,1,3,6,5,2,6,6,4,6,2,5,3,1,5},
                        {6,6,3,6,6,2,2,4,2,5,1,5,2,3,1,5,1,2,2,3,2,4,6,5,1,6,5,1,6,4,4,1},
                        {3,3,5,3,5,3,1,1,6,2,3,5,1,6,2,3,4,1,1,5,3,1,3,1,5,6,1,6,5,4,4,1},
                        {6,5,5,2,2,3,1,6,6,3,6,1,5,3,6,5,3,2,2,6,4,6,6,3,5,1,5,2,5,4,6,3},
                        {4,5,5,5,5,2,3,6,5,5,1,4,1,3,6,1,1,3,2,5,1,5,6,1,2,3,5,5,3,1,3,3},
                        {5,6,6,6,4,5,1,1,3,6,3,3,1,6,2,4,5,4,2,5,6,1,3,1,1,2,4,4,5,5,6,5},
                        {6,6,2,1,3,3,6,4,5,6,6,4,3,3,2,6,3,3,6,4,1,2,6,1,6,5,4,6,1,5,4,4},
                        {4,6,4,3,3,2,2,4,3,1,2,1,4,1,2,2,3,3,6,5,5,6,5,3,6,3,6,2,2,6,1,3},
                        {5,1,3,1,3,4,2,1,4,1,1,1,3,5,3,6,4,5,4,6,6,1,3,6,4,6,1,4,4,3,4,2},
                        {6,2,5,6,4,3,3,5,6,4,4,2,5,3,1,5,3,2,5,3,5,3,6,3,6,6,2,5,1,4,2,4},
                        {5,2,1,4,2,1,4,3,4,4,4,5,2,1,3,4,2,5,4,6,3,3,5,6,3,3,5,5,2,4,6,1},
                        {1,1,5,4,4,5,4,2,4,5,3,2,2,1,1,5,3,3,3,5,2,1,4,4,3,4,5,2,5,6,6,2}
                };
                physical = new int[][] {
                        {119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119},
                        {119,124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,117,117,0,0,0,0,0,0,0,0,0,0,0,119},
                        {119,0,0,0,0,0,0,0,0,0,117,117,117,117,117,117,117,117,117,0,0,0,0,0,0,0,0,117,117,0,0,119},
                        {119,117,117,0,0,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,117,117,0,0,0,119},
                        {119,0,117,117,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,117,0,0,0,0,119},
                        {119,0,0,0,117,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,117,117,0,0,0,119},
                        {119,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,124,117,117,0,0,0,119},
                        {119,0,0,0,0,117,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,117,117,117,0,0,0,0,119},
                        {119,0,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,124,117,117,0,0,0,0,0,0,119},
                        {119,0,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,124,117,117,0,0,0,0,0,0,0,119},
                        {119,0,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0,0,0,0,124,117,117,0,0,0,0,0,0,0,0,119},
                        {119,0,0,0,0,0,117,117,0,0,0,0,0,117,117,117,0,0,0,117,117,117,0,0,0,0,0,0,0,0,0,119},
                        {119,0,0,0,0,0,0,117,0,0,0,0,0,0,0,117,117,117,117,0,0,0,0,0,0,0,0,0,0,0,0,119},
                        {119,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0,0,0,0,119},
                        {119,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,117,117,0,0,0,0,0,0,0,0,0,0,0,0,0,119},
                        {119,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,119},
                        {119,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,119},
                        {119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119,119}
                };
                EnemySpawner spawner = new EnemySpawner(1, "heavy", new Vector2f(38, 38), 6, "shell");
                lvl.addSpawner(spawner);
                spawner = new EnemySpawner(2, "light", new Vector2f(558, 78), 6, "plasma");
                lvl.addSpawner(spawner);
                break;
            case 1:
                ground = new int[][] {
                        {57,56,57,57,58,56,57,59,58,56,57,60,57,57,56,58,59,56,57,56,57,60,59,58,58,56,57,56,60,60,60,58},
                        {56,58,58,57,60,60,57,57,59,59,59,59,59,60,59,56,60,58,56,56,60,59,60,56,57,58,59,60,57,58,56,58},
                        {56,57,59,59,57,56,57,57,57,59,59,57,58,80,80,59,56,56,56,59,58,58,59,80,58,58,59,80,80,60,58,57},
                        {58,80,58,60,57,60,57,58,58,56,57,57,57,80,58,59,58,59,60,59,57,58,60,60,57,60,59,57,60,60,59,58},
                        {57,59,60,56,57,56,59,59,59,58,57,56,56,59,56,58,57,59,60,58,59,58,60,60,57,60,60,58,56,59,60,59},
                        {56,58,57,57,60,60,58,57,59,59,58,57,57,56,56,57,60,60,60,60,60,59,58,57,58,57,60,60,57,58,59,57},
                        {59,60,58,59,56,59,57,56,57,57,58,60,56,56,60,57,59,58,76,77,57,57,56,58,60,57,56,57,57,59,56,57},
                        {58,57,57,60,57,59,58,59,56,56,60,57,56,60,59,60,56,60,78,79,56,60,59,59,56,60,59,59,58,58,56,59},
                        {57,59,59,59,59,57,58,60,57,56,59,59,60,58,56,57,59,60,57,60,58,57,59,57,57,58,58,59,57,56,57,58},
                        {58,58,59,56,59,56,57,56,60,59,58,58,59,57,58,56,56,59,56,58,60,60,57,56,56,85,86,58,81,60,56,58},
                        {58,60,56,60,57,56,57,56,91,92,93,94,59,56,58,57,58,57,59,57,60,59,60,60,60,59,57,59,58,56,57,60},
                        {60,56,57,58,58,57,58,56,58,58,60,60,60,59,57,56,57,57,58,56,58,58,57,57,56,58,60,59,60,60,56,57},
                        {57,58,59,58,59,58,56,56,59,57,59,58,56,60,58,81,58,60,58,57,57,58,58,59,57,58,57,57,56,60,58,60},
                        {59,58,57,59,59,58,59,81,58,59,60,60,57,60,58,57,57,57,58,58,58,60,57,58,57,60,58,59,59,60,59,58},
                        {58,60,56,59,57,58,58,59,56,58,58,56,60,60,56,58,57,56,58,60,59,60,58,56,60,56,59,58,60,60,57,58},
                        {58,60,60,60,56,57,57,58,60,57,57,58,60,56,57,56,58,58,57,59,56,58,59,60,60,59,60,58,59,57,60,58},
                        {59,58,57,57,59,56,60,56,58,60,57,60,59,60,57,56,58,60,58,56,57,60,60,58,56,58,57,60,57,59,56,58},
                        {58,60,56,57,56,58,57,59,60,60,57,58,57,60,60,59,57,57,59,57,60,59,58,57,57,60,58,57,59,57,57,57}
                };
                physical = new int[][] {
                        {121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121},
                        {121,0,0,0,0,0,119,119,119,119,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,121},
                        {121,0,0,0,0,119,119,0,0,0,0,0,0,0,0,119,119,0,0,0,0,119,119,0,0,0,0,0,0,0,0,121},
                        {121,0,0,0,0,119,0,0,0,0,0,0,0,0,119,119,0,0,0,0,0,0,119,119,119,0,0,0,0,0,0,121},
                        {121,0,0,0,0,119,0,0,0,0,0,0,0,0,119,0,0,0,0,0,0,0,0,0,119,119,0,0,0,0,0,121},
                        {121,0,0,122,119,119,0,0,0,0,0,0,0,0,119,122,0,0,0,0,0,0,0,0,0,119,119,123,0,0,0,121},
                        {121,0,119,119,119,0,0,0,0,0,0,0,0,0,119,119,0,0,0,0,0,0,0,0,0,0,119,119,119,119,0,121},
                        {121,0,0,0,0,0,0,0,0,0,0,0,0,0,122,119,0,0,0,0,0,0,0,0,0,0,0,0,0,119,0,121},
                        {121,0,0,0,0,0,0,0,0,0,0,0,123,119,119,119,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,121},
                        {121,0,0,0,0,0,0,119,119,119,119,119,119,119,0,0,0,0,0,0,119,119,0,0,0,0,0,0,0,0,0,121},
                        {121,0,0,0,0,0,0,119,0,0,0,0,0,0,0,0,0,0,123,119,119,0,0,0,0,0,0,0,119,0,0,121},
                        {121,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,119,119,119,0,0,0,0,0,0,0,0,119,0,0,121},
                        {121,119,119,119,0,0,0,0,0,0,0,0,0,0,0,0,119,119,0,0,0,119,122,0,0,0,0,122,119,0,0,121},
                        {121,0,0,119,119,123,0,0,0,0,0,0,119,119,119,119,119,0,0,0,0,119,119,0,0,0,0,119,119,0,0,121},
                        {121,0,0,0,119,119,119,119,119,122,0,0,119,0,0,0,0,0,0,0,0,0,119,119,0,0,0,119,0,0,0,121},
                        {121,0,0,0,0,0,0,0,119,119,0,0,119,0,0,0,0,0,0,0,0,0,0,0,0,0,119,119,0,0,0,121},
                        {121,0,0,0,0,0,0,0,0,0,0,0,119,0,0,0,0,0,0,0,0,0,0,0,0,0,119,0,0,0,0,121},
                        {121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121,121}
                };
                spawner = new EnemySpawner(3, "heavy", new Vector2f(38, 38), 6, "shell");
                lvl.addSpawner(spawner);
                spawner = new EnemySpawner(2, "light", new Vector2f(558, 78), 6, "plasma");
                lvl.addSpawner(spawner);
                spawner = new EnemySpawner(2, "siege", new Vector2f(558, 78), 6, "armored");
                lvl.addSpawner(spawner);
                break;
            default:
                throw new NotImplementedLevel();
        }

        scene.addLayer(new TileLayer(ResourceManager.Instance().GetTexture("ground"), 20, 20, ground));
        scene.addLayer(new TileLayer(ResourceManager.Instance().GetTexture("walls"), 20, 20, physical));

        InteractionLayer ilayer = new InteractionLayer(20, 20, physical[0].length, physical.length);
        ilayer.addPhysicalMap(physical);
        scene.addObjectMediator(ilayer);



        TankFactory.SetScene(scene);
        MunitionFactory.SetScene(scene);

        system = new AISystem(physical);

        //Player creation
        GameObject tank = TankFactory.SpawnTank("light", Direction.Down, new Vector2f(18, 218), 0, 10, 5, "armored");

        Player player = new Player((Tank)tank);
        system.addComponent(player);


//        tank = TankFactory.SpawnTank("light", Direction.Down, new Vector2f(38, 38), 2, 5, 0);
//
//        NPC npc = new NPC(system, (Tank)tank);
//        system.addComponent(npc);
////        scene.addObject(tank);
//
//        tank = TankFactory.SpawnTank("light", Direction.Down, new Vector2f(38, 38), 2, 5, 0);
//
//        npc = new NPC(system, (Tank)tank);
//        system.addComponent(npc);
////        scene.addObject(tank);


        lvl.setScene(scene);
        lvl.setSystem(system);

        LevelLoaded = true;
    }

}
